{"ast":null,"code":"// const sgMail = require('@sendgrid/mail');\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n// const msg = {\n//   to: 'cesarcorregiari@gmail.com', // Change to your recipient\n//   from: 'test@example.com', // Change to your verified sender\n//   subject: 'Sending with SendGrid is Fun',\n//   text: 'and easy to do anywhere, even with Node.js',\n//   html: '<strong>and easy to do anywhere, even with Node.js</strong>',\n// };\n// sgMail\n//   .send(msg)\n//   .then(() => {\n//     console.log('Email sent');\n//   })\n//   .catch((error) => {\n//     console.error(error);\n//   });\n// ======================================= SIG DIAMANTADOS\n// import Cors from 'cors';\n// import initMiddleware from '../../lib/init-middleware';\nimport sendgrid from '@sendgrid/mail'; // Initialize the cors middleware\n// const cors = initMiddleware(\n//   // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\n//   Cors({\n//     // Only allow requests with GET, POST and OPTIONS\n//     methods: ['GET', 'POST', 'OPTIONS'],\n//   })\n// );\n\nsendgrid.setApiKey(process.env.SENDGRID_API_KEY);\nexport default async function handler(req, res) {\n  // Run cors\n  // await cors(req, res);\n  const {\n    name,\n    email,\n    message\n  } = req.body;\n\n  try {\n    await sendgrid.send({\n      to: 'cesarcorregiari@gmail.com',\n      from: email,\n      subject: `Nova mensagem de ${name}`,\n      text: message // html: `<p>Assunto: ${subjectMatter}</p>\n      // <p>${textArea}</p>`,\n\n    });\n    return res.status(200).json({\n      msg: 'Message sent successfully.'\n    });\n  } catch (error) {\n    return res.status(error.statusCode || 500).json({\n      error: error.message\n    });\n  }\n}","map":{"version":3,"sources":["/home/cesar/Code/portfoliocesar/src/pages/api/mail.js"],"names":["sendgrid","setApiKey","process","env","SENDGRID_API_KEY","handler","req","res","name","email","message","body","send","to","from","subject","text","status","json","msg","error","statusCode"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA,OAAOA,QAAP,MAAqB,gBAArB,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,QAAQ,CAACC,SAAT,CAAmBC,OAAO,CAACC,GAAR,CAAYC,gBAA/B;AAEA,eAAe,eAAeC,OAAf,CAAuBC,GAAvB,EAA4BC,GAA5B,EAAiC;AAC9C;AACA;AAEA,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA;AAAf,MAA2BJ,GAAG,CAACK,IAArC;;AAEA,MAAI;AACF,UAAMX,QAAQ,CAACY,IAAT,CAAc;AAClBC,MAAAA,EAAE,EAAE,2BADc;AAElBC,MAAAA,IAAI,EAAEL,KAFY;AAGlBM,MAAAA,OAAO,EAAG,oBAAmBP,IAAK,EAHhB;AAIlBQ,MAAAA,IAAI,EAAEN,OAJY,CAKlB;AACA;;AANkB,KAAd,CAAN;AASA,WAAOH,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,MAAAA,GAAG,EAAE;AAAP,KAArB,CAAP;AACD,GAXD,CAWE,OAAOC,KAAP,EAAc;AACd,WAAOb,GAAG,CAACU,MAAJ,CAAWG,KAAK,CAACC,UAAN,IAAoB,GAA/B,EAAoCH,IAApC,CAAyC;AAAEE,MAAAA,KAAK,EAAEA,KAAK,CAACV;AAAf,KAAzC,CAAP;AACD;AACF","sourcesContent":["// const sgMail = require('@sendgrid/mail');\n// sgMail.setApiKey(process.env.SENDGRID_API_KEY);\n// const msg = {\n//   to: 'cesarcorregiari@gmail.com', // Change to your recipient\n//   from: 'test@example.com', // Change to your verified sender\n//   subject: 'Sending with SendGrid is Fun',\n//   text: 'and easy to do anywhere, even with Node.js',\n//   html: '<strong>and easy to do anywhere, even with Node.js</strong>',\n// };\n// sgMail\n//   .send(msg)\n//   .then(() => {\n//     console.log('Email sent');\n//   })\n//   .catch((error) => {\n//     console.error(error);\n//   });\n\n// ======================================= SIG DIAMANTADOS\n\n// import Cors from 'cors';\n// import initMiddleware from '../../lib/init-middleware';\nimport sendgrid from '@sendgrid/mail';\n\n// Initialize the cors middleware\n// const cors = initMiddleware(\n//   // You can read more about the available options here: https://github.com/expressjs/cors#configuration-options\n//   Cors({\n//     // Only allow requests with GET, POST and OPTIONS\n//     methods: ['GET', 'POST', 'OPTIONS'],\n//   })\n// );\n\nsendgrid.setApiKey(process.env.SENDGRID_API_KEY);\n\nexport default async function handler(req, res) {\n  // Run cors\n  // await cors(req, res);\n\n  const { name, email, message } = req.body;\n\n  try {\n    await sendgrid.send({\n      to: 'cesarcorregiari@gmail.com',\n      from: email,\n      subject: `Nova mensagem de ${name}`,\n      text: message,\n      // html: `<p>Assunto: ${subjectMatter}</p>\n      // <p>${textArea}</p>`,\n    });\n\n    return res.status(200).json({ msg: 'Message sent successfully.' });\n  } catch (error) {\n    return res.status(error.statusCode || 500).json({ error: error.message });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}